{"version":3,"file":"app-video.js","sourceRoot":"","sources":["../../src/videoCall/app-video.ts"],"names":[],"mappings":"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","sourcesContent":["import {LitElement, html, css} from 'lit';\nimport {customElement, query, property} from 'lit/decorators.js';\n\n@customElement('app-video')\nexport class AppVideoCall extends LitElement {\n  static override styles = css`\n    * {\n      margin: 0;\n      padding: 0;\n      box-sizing: border-box;\n      font-family: 'poppins', sans-serif;\n    }\n    .header {\n      width: 100%;\n      height: 100vh;\n      background: #00122e;\n      position: relative;\n    }\n    nav {\n      position: absolute;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      background: #182842;\n      width: 120px;\n      padding: 10px 0;\n    }\n    nav .logo {\n      width: 56px;\n      display: block;\n      margin: auto;\n      cursor: pointer;\n    }\n    nav ul {\n      margin-top: 160px;\n    }\n    nav ul li {\n      list-style: none;\n    }\n    nav ul li img {\n      width: 50px;\n      display: block;\n      margin: 10px auto;\n      padding: 10px;\n      cursor: pointer;\n      opacity: 0.5;\n      border-radius: 10px;\n      transition: opacity 0.5s, background 0.5s;\n    }\n    nav ul li img:hover {\n      opacity: 1;\n      background: #4d6181;\n    }\n    .active {\n      opacity: 1;\n      background: #4d6181;\n    }\n    .container {\n      margin-left: 120px;\n      padding: 0 2.5%;\n    }\n    .top-icons {\n      display: flex;\n      align-items: center;\n      justify-content: flex-end;\n      padding: 25px 0;\n    }\n    .top-icons img {\n      width: 25px;\n      margin-left: 40px;\n      cursor: pointer;\n    }\n    .row {\n      margin-top: 15px;\n      display: flex;\n      justify-content: space-between;\n    }\n    .col-1 {\n      flex-basis: 65%;\n    }\n    .col-2 {\n      flex-basis: 33%;\n    }\n    .host-img {\n      width: 100%;\n      border-radius: 15px;\n    }\n    .contarols {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    }\n    .contarols img {\n      width: 40px;\n      margin: 20px 10px;\n      cursor: pointer;\n      transition: transform 0.5s;\n    }\n    .contarols .call-icon {\n      width: 70px;\n    }\n    .contarols img:hover {\n      transform: translateY(-10px);\n    }\n    .joined {\n      background: #182842;\n      border-radius: 15px;\n      padding: 30px 40px 50px;\n      color: #fff;\n    }\n    .joined div {\n      margin-top: 20px;\n      display: grid;\n      grid-template-columns: auto auto auto;\n      grid-gap: 20px;\n    }\n    .joined img {\n      width: 100%;\n      border-radius: 10px;\n      cursor: pointer;\n    }\n    .invite {\n      background: #182842;\n      border-radius: 15px;\n      padding: 30px 40px 50px;\n      color: #fff;\n      margin-top: 20px;\n    }\n    .invite img {\n      margin-top: 20px;\n      width: 50px;\n      margin-left: 5px;\n      border-radius: 50%;\n      cursor: pointer;\n    }\n    #local-video {\n      height: 107px;\n    }\n  `;\n\n  @query('#local-video')\n  _localVideo: HTMLVideoElement | undefined;\n\n  @property()\n  online = false;\n\n  wssConnection: WebSocket;\n\n  configuration = {\n    iceServers: [\n      {\n        urls: 'stun:172.16.0.2:3478',\n      },\n      {\n        urls: 'turn:172.16.0.2:3478',\n        username: '1856502e07bd3501714bc836',\n        credential: 'AzvsD7QvPrXjf1+y',\n      },\n    ],\n  };\n\n  constructor() {\n    super();\n    localStorage.setItem(\n      'user',\n      JSON.stringify({\n        username: 'shubham',\n        password: 'password',\n      })\n    );\n    navigator.mediaDevices\n      .getUserMedia({\n        audio: false,\n        video: true,\n      })\n      .then((mediaStream: MediaStream) => {\n        if (this._localVideo != undefined) {\n          this._localVideo.srcObject = mediaStream;\n          this._localVideo.classList.remove('d-none');\n        }\n      })\n      .catch((err) => {\n        console.error(err);\n      });\n    this.wssConnection = new WebSocket('ws://localhost:9090');\n    if(localStorage.getItem('user') != null){\n      const localuser:{username: string, password: string} | null= {\n        username: 'shubham',\n        password: 'password',\n      }\n      this.wssConnection.onopen = () => {\n        this.online = true;\n        this.wssConnection.send(\n          JSON.stringify({\n            type: 'status',\n            username: localuser?.username,\n            password: localuser?.password\n          })\n        );\n        console.log('Online');\n      };\n    } else{\n      this.wssConnection.close();\n    }\n    \n    this.wssConnection.onclose = () => {\n      this.online = false;\n      console.log('Offline');\n    };\n  }\n\n  async makeCall() {\n    const peerConnection: RTCPeerConnection = new RTCPeerConnection(\n      this.configuration\n    );\n    const offer = await peerConnection.createOffer({\n      offerToReceiveAudio: true,\n      offerToReceiveVideo: true,\n    });\n    await peerConnection.setLocalDescription(offer);\n  }\n\n  override render() {\n    return html`\n      <div class=\"container\">\n      <div class=\"top-icons\">\n          <img src=\"https://i.postimg.cc/cCpcXrSV/search.png\">\n          <img src=\"https://i.postimg.cc/Pqy2TXWw/menu.png\">\n      </div>\n      <div class=\"row\">\n          <div class=\"col-1\">\n              <img src=\"https://i.postimg.cc/521rVkhD/image.png\" class=\"host-img\">\n              <div class=\"contarols\">\n                  <img src=\"https://i.postimg.cc/3NVtVtgf/chat.png\">\n                  <img src=\"https://i.postimg.cc/BQPYHG0r/disconnect.png\">\n                  <img src=\"https://i.postimg.cc/fyJH8G00/call.png\" class=\"call-icon\">\n                  <img src=\"https://i.postimg.cc/bJFgSmFY/mic.png\">\n                  <img src=\"https://i.postimg.cc/Y2sDvCJN/cast.png\">\n              </div>\n          </div>\n          <div class=\"col-2\">\n              <div class=\"joined\">\n                  <p>People Joined</p>\n                  <div>\n                    <video class=\"d-none\" id=\"local-video\" autoplay=\"\"></video>\n                  </div>\n              </div>\n              <div class=\"invite\">\n                  <p>Invite More People</p>\n                  <div>\n                      <img src=\"https://i.postimg.cc/7LHjgQXS/user-1.png\">\n                  </div>\n              </div>\n          </div>\n      </div>\n  </div>\n</div>\n    `;\n  }\n}\n"]}