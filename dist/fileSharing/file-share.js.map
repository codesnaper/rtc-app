{"version":3,"file":"file-share.js","sourceRoot":"","sources":["../../src/fileSharing/file-share.ts"],"names":[],"mappings":";;;;;;AAAA,OAAO,EAAC,UAAU,EAAE,IAAI,EAAC,MAAM,KAAK,CAAC;AACrC,OAAO,EAAC,aAAa,EAAC,MAAM,mBAAmB,CAAC;AAGhD,IAAa,SAAS,GAAtB,MAAa,SAAU,SAAQ,UAAU;IAWvC;QACE,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,SAAS,GAAG,CAAC,CAAC;QACnB,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;IACnB,CAAC;IARQ,gBAAgB;QACvB,OAAO,IAAI,CAAC;IACd,CAAC;IAQD,gBAAgB;QACd,MAAM,UAAU,GAAsB,IAAI,iBAAiB,CAAC,SAAS,CAAC,CAAC;QACvE,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC,iBAAiB,CAAC,iBAAiB,EAAE;YACjE,EAAE,EAAE,IAAI,CAAC,SAAS;SACnB,CAAC,CAAC;QACH,UAAU,CAAC,cAAc,GAAG,CAAC,KAAgC,EAAE,EAAE;YAC/D,IAAI,KAAK,CAAC,SAAS,EAAE;gBACnB,UAAU,CAAC,eAAe,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,GAAE,CAAC,CAAC,CAAC;aAC5D;QACH,CAAC,CAAC;QACF,2CAA2C;QAC3C,4CAA4C;IAC9C,CAAC;IAED,UAAU;;QACR,MAAA,IAAI,CAAC,WAAW,0CAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;IACnC,CAAC;IAED,cAAc,CAAC,EAAU;QACvB,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;IACpB,CAAC;IAED,WAAW;;QACT,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC;QAC9B,MAAM,UAAU,GAAsB,IAAI,iBAAiB,CAAC,SAAS,CAAC,CAAC;QACvE,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC,iBAAiB,CAAC,iBAAiB,EAAE;YACjE,EAAE,EAAE,IAAI,CAAC,OAAO;SACjB,CAAC,CAAC;QACH,UAAU,CAAC,cAAc,GAAG,CAAC,KAAgC,EAAE,EAAE;YAC/D,IAAI,KAAK,CAAC,SAAS,EAAE;gBACnB,UAAU,CAAC,eAAe,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,GAAE,CAAC,CAAC,CAAC;aAC5D;QACH,CAAC,CAAC;QACF,MAAA,IAAI,CAAC,WAAW,0CAAE,gBAAgB,CAAC,SAAS,EAAE,CAAC,KAAK,EAAE,EAAE;YACtD,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QACpB,CAAC,CAAC,CAAC;IACL,CAAC;IAEQ,MAAM;QACb,OAAO,IAAI,CAAA;;;iCAGkB,IAAI,CAAC,SAAS;;;;;;;;;;;;;2BAapB,IAAI,CAAC,gBAAgB;;;2BAGrB,IAAI,CAAC,UAAU;;;;;;;;;;;;;;;;;;mBAkBvB,IAAI,CAAC,WAAW;;;;;;KAM9B,CAAC;IACJ,CAAC;CACF,CAAA;AArGY,SAAS;IADrB,aAAa,CAAC,YAAY,CAAC;GACf,SAAS,CAqGrB;SArGY,SAAS","sourcesContent":["import {LitElement, html} from 'lit';\nimport {customElement} from 'lit/decorators.js';\n\n@customElement('file-share')\nexport class FileShare extends LitElement {\n  dataChannel: RTCDataChannel | undefined;\n\n  channelId: number;\n\n  shareId: number;\n\n  override createRenderRoot() {\n    return this;\n  }\n\n  constructor() {\n    super();\n    this.channelId = 1;\n    this.shareId = 0;\n  }\n\n  createConnection() {\n    const connection: RTCPeerConnection = new RTCPeerConnection(undefined);\n    this.dataChannel = connection.createDataChannel('sendDataChannel', {\n      id: this.channelId,\n    });\n    connection.onicecandidate = (event: RTCPeerConnectionIceEvent) => {\n      if (event.candidate) {\n        connection.addIceCandidate(event.candidate).then(() => {});\n      }\n    };\n    // dataChannel.onopen = (ev: Event) => { };\n    // dataChannel.onclose = (ev: Event) => { };\n  }\n\n  uploadData() {\n    this.dataChannel?.send('sample');\n  }\n\n  updateUniqueId(id: number) {\n    this.shareId = id;\n  }\n\n  recieveData() {\n    this.shareId = this.channelId;\n    const connection: RTCPeerConnection = new RTCPeerConnection(undefined);\n    this.dataChannel = connection.createDataChannel('sendDataChannel', {\n      id: this.shareId,\n    });\n    connection.onicecandidate = (event: RTCPeerConnectionIceEvent) => {\n      if (event.candidate) {\n        connection.addIceCandidate(event.candidate).then(() => {});\n      }\n    };\n    this.dataChannel?.addEventListener('message', (event) => {\n      alert(event.data);\n    });\n  }\n\n  override render() {\n    return html`\n      <div class=\"row\">\n        <div class=\"col-12\">\n          <p>Your unique id is ${this.channelId}</p>\n        </div>\n        <form>\n          <div class=\"mb-3\">\n            <label for=\"exampleFormControlTextarea1\" class=\"form-label\"\n              >Example textarea</label\n            >\n            <textarea\n              class=\"form-control\"\n              id=\"exampleFormControlTextarea1\"\n              rows=\"3\"\n            ></textarea>\n          </div>\n          <button @click=${this.createConnection} part=\"button\">\n            Create Connection\n          </button>\n          <button @click=${this.uploadData} type=\"submit\">Upload File</button>\n        </form>\n      </div>\n      <form>\n        <div class=\"mb-3\">\n          <label for=\"exampleInputEmail1\" class=\"form-label\">Unique Id</label>\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            id=\"exampleInputEmail1\"\n            aria-describedby=\"emailHelp\"\n          />\n          <div id=\"emailHelp\" class=\"form-text\">\n            We'll never share your email with anyone else.\n          </div>\n        </div>\n        <button\n          type=\"submit\"\n          @click=${this.recieveData}\n          class=\"btn btn-primary\"\n        >\n          Submit\n        </button>\n      </form>\n    `;\n  }\n}\n"]}